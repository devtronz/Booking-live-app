<!DOCTYPE html>
<html>
<head>
  <title>Driver Panel</title>
</head>
<body>
<h2>ðŸš• Driver Panel</h2>
<p id="ride">Waiting for ride...</p>

<button onclick="acceptRide()">Accept Ride</button>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
const socket = io("https://booking-ride-live-app.onrender.com");

const driverId = "driver_" + Math.floor(Math.random() * 1000);
socket.emit("join-driver", driverId);

let currentRide = null;

socket.on("new-ride", ride => {
  currentRide = ride;
  document.getElementById("ride").innerText =
    `New Ride:
User: ${ride.userId}
From: ${ride.pickup}
To: ${ride.drop}
Fare: â‚¹${ride.fare}`;
});

function acceptRide() {
  if (!currentRide) return alert("No ride");

  socket.emit("accept-ride", {
    rideId: currentRide.id,
    driverId
  });

  document.getElementById("ride").innerText =
    "Ride accepted ðŸš•";
}
</script>
</body>
</html>
